generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
  engineType      = "binary"
}

datasource db {
  provider             = "mysql"
  url                  = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

model Chat {
  id    String     @id @unique(map: "id") @db.VarChar(70)
  users UserChat[]
}

model User {
  id          Int        @id @default(autoincrement())
  name        String     @db.VarChar(255)
  image       String     @db.VarChar(255)
  rating      Int?       @default(0)
  reviewCount Int?       @default(0)
  email       String?    @unique(map: "email") @db.VarChar(255)
  chats       UserChat[]
}

model UserChat {
  id     Int    @id @default(autoincrement())
  userId Int
  chatId String @db.VarChar(255)
  user   User   @relation(fields: [userId], references: [id])
  chat   Chat   @relation(fields: [chatId], references: [id])

  @@index([chatId], map: "chatIdIdx")
  @@index([userId], map: "userIdIdx")
}
